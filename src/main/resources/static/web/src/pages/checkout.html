<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/checkout.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <title>Checkout</title>
</head>

<body class="body d-flex flex-column gap-2">
    <div id="app">
        <header class="header">
            <div class="logoContainer d-flex justify-content-center align-items-center p-3">
                <img src="../assets/winest-black.png" alt="logo" class="logo">
            </div>
        </header>
        <main class="gap3 mainContainer">
            <div class="carrito">
                <div data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false"
                    aria-controls="collapseExample" class="d-flex justify-content-center verResumen">
                    <div class="resumenContainer d-flex justify-content-between align-items-center p-2">
                        <p class="text-decoration-underline">Show cart</p>
                        <p>${{(total).toFixed(2)}}</p>
                    </div>
                </div>

                <div class="collapse" id="collapseExample">
                    <div class="collapseContainer d-flex justify-content-center">
                        <div class="cart">

                            <template v-for="product in cart">
                                <div class="d-flex justify-content-between p-3">
                                    <div class="d-flex gap-3">
                                        <div class="cartLogoContainer d-flex justify-content-center align-items-center">
                                            <img :src="product.image" alt="vino" class="cartLogo">
                                        </div>
                                        <div>
                                            <p>{{product.name}}</p>
                                            <p>{{product.quantity}}</p>
                                        </div>
                                    </div>
                                    <p>${{(product.quantity*product.price).toFixed(2)}}</p>
                                </div>
                            </template>

                            


                            <div class="d-flex justify-content-between p-3 cartTotal">
                                <p>Total</p>
                                <p>${{(total).toFixed(2)}}</p>
                            </div>
                        </div>
                    </div>

                </div>


            </div>
            <div class="carritoDesktop">
                <div class="collapseContainer d-flex justify-content-center">
                    <div class="cart">

                        <template v-for="product in cart">
                            <div class="d-flex justify-content-between p-3">
                            <div class="d-flex gap-3">
                                <div class="cartLogoContainer d-flex justify-content-center align-items-center">
                                    <img :src="product.image" alt="vino" class="cartLogo">
                                </div>
                                <div>
                                    <p>{{product.name}}</p>
                                    <p>{{product.quantity}}</p>
                                </div>
                            </div>
                            <p>${{(product.quantity*product.price).toFixed(2)}}</p>
                         </div>
                        </template>

                        

                        <div class="d-flex justify-content-between p-3 cartTotal">
                            <p>Total</p>
                            <p>${{total}}</p>
                        </div>
                    </div>
                </div>
            </div>


            </p>



            <div class="formulario pt-4">
                <div class="logoDesktop">
                    <img src="../assets/winest-black.png" alt="logo" class="logo">
                </div>
                <form class="d-flex flex-column justify-content-center gap-4 formContainer">
                    <fieldset class="fieldsetForm">
                        <legend>Email address:</legend>
                        <div class="formGroup">
                            <input type="text" name="email" id="email" placeholder=" " class="formInput"
                                :class="{'error1' : error1}" v-model="email">
                            <label for="email" class="formLabel">Email: </label>
                            <p class="formError">{{warningEmail}}</p>
                        </div>
                    </fieldset>

                    <fieldset class="fieldsetForm pt-4">
                        <legend>Shipping address:</legend>
                        <div class="d-flex flex-column gap-1 pt-3">
                            <div class="formGroup">
                                <input type="text" name="country" id="country" placeholder=" " class="formInput"
                                    :class="{'error2' : error2}" v-model="country">
                                <label for="country" class="formLabel">Country: </label>
                                <p class="formError">{{warningCountry}}</p>
                            </div>
                            <div class="formGroup">
                                <input type="text" name="name" id="name" placeholder=" " class="formInput"
                                    :class="{'error3' : error3}" v-model="name">
                                <label for="name" class="formLabel">Name: </label>
                                <p class="formError">{{warningName}}</p>
                            </div>
                            <div class="formGroup">
                                <input type="text" name="lastname" id="lastname" placeholder=" " class="formInput"
                                    :class="{'error4' : error4}" v-model="lastName">
                                <label for="lastname" class="formLabel">Last name: </label>
                                <p class="formError">{{warningLastName}}</p>
                            </div>
                            <div class="formGroup">
                                <input type="text" name="address" id="address" placeholder=" " class="formInput"
                                    :class="{'error5' : error5}" v-model="address">
                                <label for="adress" class="formLabel">Adress and number: </label>
                                <p class="formError">{{warningAddress}}</p>
                            </div>
                            <div class="formGroup">
                                <input type="number" name="zipcode" id="zipcode" placeholder=" " class="formInput"
                                    :class="{'error6' : error6}" v-model="zipcode">
                                <label for="zipcode" class="formLabel">Zip-code:</label>
                                <p class="formError">{{warningZipcode}}</p>
                            </div>
                            <div class="formGroup">
                                <input type="text" name="city" id="city" placeholder=" " class="formInput"
                                    :class="{'error7' : error7}" v-model="city">
                                <label for="city" class="formLabel">City: </label>
                                <p class="formError">{{warningCity}}</p>
                            </div>
                            <div class="formGroup">
                                <input type="number" name="phone" id="phone" placeholder=" " class="formInput"
                                    :class="{'error8' : error8}" v-model="phone">
                                <label for="phone" class="formLabel">Phone-number: </label>
                                <p class="formError">{{warningPhone}}</p>
                            </div>

                        </div>
                    </fieldset>
                    <div class="buttonContainer">
                        <button class="formButton" @Click.prevent="formPayment()">Go to payment</button>
                        <a href="./store.html" class="ancor">Back to cart</a>
                    </div>
                </form>
            </div>
            <div class="modall" :class="{'modalShow' : modal}">
                <div class="modalContainer">
                    <div class="d-flex justify-content-end">
                        <span class="material-symbols-outlined cerrarModal" @click="modal = !modal">close</span>
                    </div>
                    <form>
                        <legend>Payment</legend>
                        <fieldset class="d-flex flex-column gap-3">
                            <div class="formGroup">
                                <input type="text" v-on:keyup="cardNumberFormat()" v-on:keydown="cardNumberFormat()"
                                    maxlength="19" name="number" id="number" placeholder=" " class="formInput"
                                    v-model="cardNumber">
                                <label for="number" class="formLabel">Card Number: </label>
                                <ion-icon class="deleteButton" @click="deleteCaracter()" name="backspace-outline">
                                </ion-icon>
                            </div>
                            <div class="formGroup">
                                <input type="text" name="cvv" id="cvv" placeholder=" " class="formInput" v-model="cvv">
                                <label for="cvv" class="formLabel">Cvv: </label>
                            </div>
                        </fieldset>
                    </form>
                    <div class="d-flex justify-content-center pt-4">
                        <button @Click="sendPayment()" class="formButton">Purchase</button>
                    </div>
                </div>
            </div>


        </main>
    </div>





    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="../scripts/checkout.js"></script>

</body>

</html>